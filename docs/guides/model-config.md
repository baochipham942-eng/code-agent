# æ¨¡å‹é…ç½®æŒ‡å—

> æ›´æ–°æ—¶é—´: 2026-02-12 (GLM-5 å‡çº§)

## å·²é…ç½®çš„æ¨¡å‹ä¾›åº”å•†

| ä¾›åº”å•† | API Key | æˆæœ¬ç±»å‹ | ä¸»è¦ç”¨é€” |
|--------|---------|----------|----------|
| **DeepSeek** | âœ… å·²é…ç½® | æŒ‰é‡ | å¤‡ç”¨ä»£ç æ¨¡å‹ |
| **æ™ºè°± GLM** | âœ… å·²é…ç½® | åŒ…å¹´/å…è´¹ | æ——èˆ°(GLM-5) + è§†è§‰ + å…è´¹å¿«é€Ÿæ¨¡å‹ |
| **Groq** | âœ… å·²é…ç½® | å…è´¹é¢åº¦ | æé€Ÿæ¨ç† |
| **ç™¾ç‚¼/åƒé—®** | âœ… å·²é…ç½® | æŒ‰é‡ | å…¨æ¨¡æ€ (è§†é¢‘/éŸ³é¢‘/å›¾åƒ) |
| **Kimi K2.5** | âœ… å·²é…ç½® | åŒ…æœˆ | **ä¸»åŠ›æ¨¡å‹** (haioi.net) |
| **Perplexity** | âœ… å·²é…ç½® | æŒ‰é‡ | è”ç½‘æœç´¢ |
| **OpenRouter** | âœ… å·²é…ç½® | æŒ‰é‡/å…è´¹ | ä¸­è½¬å„å®¶æ¨¡å‹ |

---

## æˆæœ¬ç±»å‹è¯´æ˜

| ç±»å‹ | æ ‡è¯† | è¯´æ˜ |
|------|------|------|
| `free` | ğŸ†“ | å®Œå…¨å…è´¹ |
| `quota` | ğŸ« | å…è´¹é¢åº¦é™åˆ¶ |
| `monthly` | ğŸ“… | åŒ…æœˆå¥—é¤ |
| `yearly` | ğŸ“… | åŒ…å¹´å¥—é¤ |
| `payg` | ğŸ’° | æŒ‰é‡ä»˜è´¹ (Pay As You Go) |

---

## OpenRouter æ¨¡å‹æ˜ç»†

| æ¨¡å‹ | æˆæœ¬ | è¯´æ˜ |
|------|------|------|
| `google/gemma-3n-e2b-it:free` | ğŸ†“ å…è´¹ | Gemma 3 |
| `meta-llama/llama-3.3-70b-instruct:free` | ğŸ†“ å…è´¹ | Llama 3.3 70B |
| `deepseek/deepseek-r1-0528:free` | ğŸ†“ å…è´¹ | DeepSeek R1 æ¨ç† |
| `google/gemini-3-flash-preview` | ğŸ’° æŒ‰é‡ | Gemini 3 Flash |
| `google/gemini-3-pro-preview` | ğŸ’° æŒ‰é‡ | Gemini 3 Pro |
| `anthropic/claude-opus-4.5` | ğŸ’° æŒ‰é‡ | Claude Opus 4.5 |
| `anthropic/claude-sonnet-4.5` | ğŸ’° æŒ‰é‡ | Claude Sonnet 4.5 |
| `anthropic/claude-haiku-4.5` | ğŸ’° æŒ‰é‡ | Claude Haiku 4.5 |
| `openai/gpt-5.2` | ğŸ’° æŒ‰é‡ | GPT-5.2 |
| `openai/gpt-5.2-codex` | ğŸ’° æŒ‰é‡ | GPT-5.2 Codex |
| `meta-llama/llama-4-maverick` | ğŸ’° æŒ‰é‡ | Llama 4 Maverick |
| `deepseek/deepseek-v3.2` | ğŸ’° æŒ‰é‡ | DeepSeek V3.2 |

---

## ç™¾ç‚¼/åƒé—® æ¨¡å‹æ˜ç»†

| æ¨¡å‹ | æˆæœ¬ | è¯´æ˜ |
|------|------|------|
| `qwen3-max` | ğŸ’° æŒ‰é‡ | æ——èˆ°è¯­è¨€æ¨¡å‹ |
| `qwen-max` / `qwen-plus` / `qwen-turbo` | ğŸ’° æŒ‰é‡ | è¯­è¨€æ¨¡å‹ç³»åˆ— |
| `qwq-plus` | ğŸ’° æŒ‰é‡ | æ·±åº¦æ¨ç† |
| `qvq-max` | ğŸ’° æŒ‰é‡ | è§†è§‰æ¨ç† |
| `qwen3-coder-plus` / `qwen3-coder-flash` | ğŸ’° æŒ‰é‡ | ä»£ç æ¨¡å‹ |
| `qwen-vl-max` / `qwen3-vl-plus` / `qwen3-vl-flash` | ğŸ’° æŒ‰é‡ | è§†è§‰æ¨¡å‹ |
| `qwen-omni-turbo` / `qwen3-omni-flash` | ğŸ’° æŒ‰é‡ | å…¨æ¨¡æ€ (å›¾+éŸ³+è§†é¢‘) |
| `qwen-image-max` / `qwen-image-edit-max` | ğŸ’° æŒ‰é‡ | å›¾åƒç”Ÿæˆ/ç¼–è¾‘ |
| `qwen3-tts-flash` / `qwen3-asr-flash-realtime` | ğŸ’° æŒ‰é‡ | è¯­éŸ³åˆæˆ/è¯†åˆ« |
| `qwen2.5-7b-instruct-1m` | ğŸ’° æŒ‰é‡ | è¶…é•¿ä¸Šä¸‹æ–‡ (1M) |

> ç™¾ç‚¼æ–°ç”¨æˆ·æœ‰å…è´¹é¢åº¦

---

## æ™ºè°± GLM æ¨¡å‹æ˜ç»†

| æ¨¡å‹ | æˆæœ¬ | è¯´æ˜ |
|------|------|------|
| `glm-5` | â³ å¾…å¼€é€š | **æ–°ä¸€ä»£æ——èˆ°** (200Kä¸Šä¸‹æ–‡, 744B/40B active, Codingå¥—é¤æœªæ”¯æŒ) |
| `glm-4.7` | ğŸ“… åŒ…å¹´ | æ——èˆ°è¯­è¨€ (Codingå¥—é¤) |
| `glm-4.6v` | ğŸ“… åŒ…å¹´ | æ——èˆ°è§†è§‰ (Codingå¥—é¤) |
| `glm-4.7-flash` | ğŸ†“ å…è´¹ | å¿«é€Ÿè¯­è¨€ |
| `glm-4.6v-flash` | ğŸ†“ å…è´¹ | å¿«é€Ÿè§†è§‰ |
| `codegeex-4` | ğŸ†“ å…è´¹ | ä»£ç ä¸“ç”¨ |
| `cogview-3-flash` | ğŸ†“ å…è´¹ | æ–‡ç”Ÿå›¾ |
| `cogvideox-flash` | ğŸ†“ å…è´¹ | æ–‡ç”Ÿè§†é¢‘ |

---

## Groq æ¨¡å‹æ˜ç»†

| æ¨¡å‹ | æˆæœ¬ | è¯´æ˜ |
|------|------|------|
| `llama-4-maverick-17b-128e-instruct` | ğŸ« é¢åº¦ | Llama 4 æœ€æ–° |
| `llama-4-scout-17b-16e-instruct` | ğŸ« é¢åº¦ | Llama 4 å¤šæ¨¡æ€ |
| `llama-3.3-70b-versatile` | ğŸ« é¢åº¦ | Llama 3.3 ç¨³å®šç‰ˆ |
| `moonshotai/kimi-k2-instruct` | ğŸ« é¢åº¦ | Kimi K2 æé€Ÿç‰ˆ |
| `groq/compound` | ğŸ« é¢åº¦ | æ™ºèƒ½è·¯ç”± |

---

## DeepSeek æ¨¡å‹æ˜ç»†

| æ¨¡å‹ | æˆæœ¬ | è¯´æ˜ |
|------|------|------|
| `deepseek-chat` | ğŸ’° æŒ‰é‡ | é€šç”¨å¯¹è¯ |
| `deepseek-coder` | ğŸ’° æŒ‰é‡ | ä»£ç ä¸“ç”¨ |
| `deepseek-reasoner` | ğŸ’° æŒ‰é‡ | æ·±åº¦æ¨ç† (R1) |

---

## Perplexity æ¨¡å‹æ˜ç»†

| æ¨¡å‹ | æˆæœ¬ | è¯´æ˜ |
|------|------|------|
| `sonar-pro` | ğŸ’° æŒ‰é‡ | è”ç½‘æœç´¢ (é«˜è´¨é‡) |
| `sonar` | ğŸ’° æŒ‰é‡ | è”ç½‘æœç´¢ (å¿«é€Ÿ) |

---

## Kimi/Moonshot æ¨¡å‹æ˜ç»†

| æ¨¡å‹ | æˆæœ¬ | è¯´æ˜ |
|------|------|------|
| `kimi-k2.5` | ğŸ“… åŒ…æœˆ | æ——èˆ°æ¨¡å‹ (haioi.net ä»£ç†) |
| `moonshot-v1-8k` | ğŸ’° æŒ‰é‡ | 8K ä¸Šä¸‹æ–‡ |
| `moonshot-v1-32k` | ğŸ’° æŒ‰é‡ | 32K ä¸Šä¸‹æ–‡ |
| `moonshot-v1-128k` | ğŸ’° æŒ‰é‡ | 128K ä¸Šä¸‹æ–‡ |

---

## å½“å‰è·¯ç”±é…ç½®

```json
{
  "routing": {
    "code": {"provider": "moonshot", "model": "kimi-k2.5"},
    "vision": {"provider": "zhipu", "model": "glm-4.6v"},
    "fast": {"provider": "zhipu", "model": "glm-4.7-flash"},
    "gui": {"provider": "zhipu", "model": "glm-4.6v-flash"},
    "video": {"provider": "qwen", "model": "qwen3-vl-plus"},
    "evaluation": {"provider": "moonshot", "model": "kimi-k2.5"}
  }
}
```

### è‡ªé€‚åº”è·¯ç”± (v0.16.22+)

ç®€å•ä»»åŠ¡è‡ªåŠ¨è·¯ç”±åˆ°å…è´¹æ¨¡å‹ï¼Œé™ä½ API æˆæœ¬ã€‚å¤±è´¥æ—¶è‡ªåŠ¨ fallback åˆ°é»˜è®¤æ¨¡å‹ã€‚

| å¤æ‚åº¦ | åˆ¤å®šæ¡ä»¶ | è·¯ç”±ç›®æ ‡ |
|--------|---------|---------|
| `simple` (score < 30) | ç”¨æˆ·æ¶ˆæ¯ < 50 å­— + æ— ä»£ç å— + æ— æ–‡ä»¶å¼•ç”¨ | zhipu/glm-4.7-flashï¼ˆå…è´¹ï¼‰|
| `moderate` (30-60) | 50-200 å­— æˆ– 1 ä¸ªä»£ç å— | ä¿æŒé»˜è®¤ï¼ˆmoonshot/kimi-k2.5ï¼‰ |
| `complex` (60+) | > 200 å­— æˆ– å¤šä»£ç å— æˆ– "é‡æ„/æ¶æ„" å…³é”®è¯ | ä¿æŒé»˜è®¤ |

ç›¸å…³ä»£ç ï¼š`src/main/model/adaptiveRouter.ts`

### æ¨ç†è¯·æ±‚ç¼“å­˜ (v0.16.22+)

éæµå¼è¯·æ±‚çš„ LRU ç¼“å­˜ï¼Œé¿å…é‡å¤è°ƒç”¨ APIã€‚

| é…ç½®é¡¹ | å€¼ |
|--------|------|
| ç¼“å­˜å®¹é‡ | 50 æ¡ |
| TTL | 5 åˆ†é’Ÿ |
| Key ç®—æ³• | md5(last 3 messages + provider + model) |
| ç¼“å­˜èŒƒå›´ | ä»… `type: 'text'` å“åº”ï¼ˆä¸ç¼“å­˜ tool_useï¼‰ |
| æµå¼è¯·æ±‚ | ä¸ç¼“å­˜ï¼ˆ`onStream` éç©ºæ—¶è·³è¿‡ï¼‰ |

ç›¸å…³ä»£ç ï¼š`src/main/model/inferenceCache.ts`

### è¯„æµ‹ç³»ç»Ÿä¸“ç”¨é…ç½®

è¯„æµ‹ç³»ç»Ÿä½¿ç”¨ **Kimi K2.5** ä½œä¸ºè¯„å®¡æ¨¡å‹ï¼ˆæ”¯æŒå¹¶å‘ 4 ä¸ªè¯„å®¡å‘˜åŒæ—¶è°ƒç”¨ï¼‰ï¼š

| é…ç½®é¡¹ | å€¼ | è¯´æ˜ |
|--------|------|------|
| Provider | `moonshot` | Kimi/Moonshot |
| Model | `kimi-k2.5` | K2.5 æ——èˆ°ç‰ˆ |
| Base URL | `https://cn.haioi.net/v1` | haioi.net ä»£ç† |
| ç¯å¢ƒå˜é‡ | `KIMI_K25_API_KEY` | API Key |
| ç¯å¢ƒå˜é‡ | `KIMI_K25_API_URL` | å¯é€‰ï¼Œè¦†ç›–é»˜è®¤ URL |

> **æ³¨æ„**: GLM ä¸æ”¯æŒé«˜å¹¶å‘ï¼Œè¯„æµ‹éœ€è¦ 4 ä¸ªå¹¶è¡Œè¯·æ±‚ï¼Œå› æ­¤ä½¿ç”¨ Kimi K2.5 åŒ…æœˆå¥—é¤ã€‚

---

## é…ç½®æ–‡ä»¶ä½ç½®

| æ–‡ä»¶ | ç”¨é€” |
|------|------|
| `.env` | API Keys |
| `~/Library/Application Support/code-agent/config.json` | è·¯ç”±é…ç½® |
| `src/main/model/providerRegistry.ts` | æ¨¡å‹æ³¨å†Œè¡¨ |
