<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QR Code Generator - äºŒç»´ç ç”Ÿæˆå™¨</title>
    <style>
        /* All CSS styles here */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: system-ui, -apple-system, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; display: flex; justify-content: center; align-items: center; padding: 20px; }
        .container { background: white; border-radius: 20px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); padding: 40px; max-width: 800px; width: 100%; }
        h1 { color: #333; text-align: center; margin-bottom: 10px; font-size: 2.5rem; }
        .subtitle { color: #666; text-align: center; margin-bottom: 40px; font-size: 1.1rem; }
        .app { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; }
        .input-section { display: flex; flex-direction: column; }
        .output-section { display: flex; flex-direction: column; align-items: center; }
        label { font-weight: 600; color: #444; margin-bottom: 8px; font-size: 1rem; }
        textarea { width: 100%; height: 150px; padding: 15px; border: 2px solid #e0e0e0; border-radius: 10px; font-size: 1rem; resize: vertical; transition: border-color 0.3s; }
        textarea:focus { outline: none; border-color: #667eea; }
        .controls { margin-top: 20px; display: flex; flex-direction: column; gap: 15px; }
        .control-group { display: flex; flex-direction: column; gap: 8px; }
        .slider-container { display: flex; align-items: center; gap: 15px; }
        input[type="range"] { flex: 1; height: 8px; border-radius: 4px; background: #e0e0e0; outline: none; }
        .size-value { font-weight: 600; color: #667eea; min-width: 40px; }
        .color-picker { display: flex; gap: 15px; align-items: center; }
        input[type="color"] { width: 40px; height: 40px; border: none; border-radius: 8px; cursor: pointer; }
        .qr-container { background: white; padding: 20px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); margin-bottom: 25px; display: flex; justify-content: center; align-items: center; min-height: 300px; }
        #qrcode { display: flex; justify-content: center; align-items: center; }
        .buttons { display: flex; gap: 15px; margin-top: 20px; }
        button { padding: 14px 28px; border: none; border-radius: 10px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.3s; display: flex; align-items: center; justify-content: center; gap: 8px; }
        .generate-btn { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; flex: 1; }
        .generate-btn:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4); }
        .download-btn { background: #10b981; color: white; flex: 1; }
        .download-btn:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(16, 185, 129, 0.4); }
        .download-btn:disabled { background: #ccc; cursor: not-allowed; transform: none; box-shadow: none; }
        .examples { margin-top: 30px; padding-top: 25px; border-top: 1px solid #eee; }
        .examples h3 { color: #444; margin-bottom: 15px; }
        .example-buttons { display: flex; flex-wrap: wrap; gap: 10px; }
        .example-btn { padding: 8px 16px; background: #f3f4f6; border: 1px solid #e5e7eb; border-radius: 8px; color: #4b5563; cursor: pointer; transition: all 0.2s; }
        .example-btn:hover { background: #e5e7eb; }
        .stats { margin-top: 25px; padding: 15px; background: #f8fafc; border-radius: 10px; font-size: 0.9rem; color: #64748b; }
        .stats p { margin: 5px 0; }
        @media (max-width: 768px) {
            .app { grid-template-columns: 1fr; }
            .container { padding: 25px; }
            h1 { font-size: 2rem; }
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
</head>
<body>
    <div class="container">
        <h1>ğŸ”³ QR Code Generator</h1>
        <p class="subtitle">å¿«é€Ÿç”Ÿæˆè‡ªå®šä¹‰äºŒç»´ç  - æ”¯æŒæ–‡æœ¬ã€URLã€è”ç³»æ–¹å¼ç­‰</p>
        
        <div class="app">
            <div class="input-section">
                <label for="inputText">è¾“å…¥å†…å®¹ï¼š</label>
                <textarea id="inputText" placeholder="è¾“å…¥æ–‡æœ¬æˆ–URL...&#10;ä¾‹å¦‚ï¼šhttps://example.com&#10;æˆ–ï¼šHello World!&#10;æˆ–ï¼šWIFI:S:MyWiFi;T:WPA;P:password123;;"></textarea>
                
                <div class="controls">
                    <div class="control-group">
                        <label>äºŒç»´ç å°ºå¯¸ï¼š<span class="size-value" id="sizeValue">300</span>px</label>
                        <div class="slider-container">
                            <input type="range" id="sizeSlider" min="100" max="500" value="300" step="10">
                        </div>
                    </div>
                    
                    <div class="control-group">
                        <label>é¢œè‰²è®¾ç½®ï¼š</label>
                        <div class="color-picker">
                            <span>å‰æ™¯è‰²ï¼š</span>
                            <input type="color" id="foregroundColor" value="#000000">
                            <span>èƒŒæ™¯è‰²ï¼š</span>
                            <input type="color" id="backgroundColor" value="#ffffff">
                        </div>
                    </div>
                </div>
                
                <div class="buttons">
                    <button class="generate-btn" id="generateBtn">
                        <span>âœ¨ ç”ŸæˆäºŒç»´ç </span>
                    </button>
                    <button class="download-btn" id="downloadBtn" disabled>
                        <span>ğŸ“¥ ä¸‹è½½ PNG</span>
                    </button>
                </div>
            </div>
            
            <div class="output-section">
                <div class="qr-container">
                    <div id="qrcode">
                        <p style="color: #999;">äºŒç»´ç å°†åœ¨è¿™é‡Œæ˜¾ç¤º</p>
                    </div>
                </div>
                
                <div class="stats" id="stats">
                    <p>ğŸ“Š å­—ç¬¦æ•°ï¼š<span id="charCount">0</span></p>
                    <p>ğŸ“ æ¨èå°ºå¯¸ï¼š<span id="recommendedSize">L</span> (å®¹é”™ç‡)</p>
                    <p>âš¡ ç”Ÿæˆæ—¶é—´ï¼š<span id="generationTime">-</span>ms</p>
                </div>
            </div>
        </div>
        
        <div class="examples">
            <h3>ğŸ’¡ ç¤ºä¾‹å†…å®¹ï¼š</h3>
            <div class="example-buttons">
                <button class="example-btn" data-text="https://github.com">GitHub</button>
                <button class="example-btn" data-text="https://www.google.com">Google</button>
                <button class="example-btn" data-text="WIFI:S:MyWiFi;T:WPA;P:password123;;">WiFi è¿æ¥</button>
                <button class="example-btn" data-text="BEGIN:VCARD&#10;VERSION:3.0&#10;FN:å¼ ä¸‰&#10;TEL:+8613800138000&#10;EMAIL:zhangsan@example.com&#10;END:VCARD">è”ç³»äººåç‰‡</button>
                <button class="example-btn" data-text="Hello World! è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•äºŒç»´ç ã€‚">æµ‹è¯•æ–‡æœ¬</button>
                <button class="example-btn" data-text="mailto:example@domain.com?subject=Hello&body=This is a test email">å‘é€é‚®ä»¶</button>
            </div>
        </div>
    </div>

    <script>
        // DOM å…ƒç´ 
        const inputText = document.getElementById('inputText');
        const sizeSlider = document.getElementById('sizeSlider');
        const sizeValue = document.getElementById('sizeValue');
        const foregroundColor = document.getElementById('foregroundColor');
        const backgroundColor = document.getElementById('backgroundColor');
        const generateBtn = document.getElementById('generateBtn');
        const downloadBtn = document.getElementById('downloadBtn');
        const qrcodeDiv = document.getElementById('qrcode');
        const charCount = document.getElementById('charCount');
        const recommendedSize = document.getElementById('recommendedSize');
        const generationTime = document.getElementById('generationTime');
        const exampleButtons = document.querySelectorAll('.example-btn');
        
        // å½“å‰äºŒç»´ç æ•°æ®
        let currentQRCode = null;
        let qrCanvas = null;
        
        // åˆå§‹åŒ–
        function init() {
            // æ›´æ–°å­—ç¬¦æ•°
            updateCharCount();
            
            // ç»‘å®šäº‹ä»¶ç›‘å¬å™¨
            inputText.addEventListener('input', updateCharCount);
            sizeSlider.addEventListener('input', updateSizeValue);
            generateBtn.addEventListener('click', generateQRCode);
            downloadBtn.addEventListener('click', downloadQRCode);
            
            // ç¤ºä¾‹æŒ‰é’®
            exampleButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    const text = btn.getAttribute('data-text');
                    inputText.value = text.replace(/&#10;/g, '\n');
                    updateCharCount();
                    generateQRCode();
                });
            });
            
            // åˆå§‹ç”Ÿæˆ
            generateQRCode();
        }
        
        // æ›´æ–°å­—ç¬¦æ•°
        function updateCharCount() {
            const count = inputText.value.length;
            charCount.textContent = count;
            
            // æ¨èå®¹é”™ç‡
            let level = 'L';
            if (count > 100) level = 'M';
            if (count > 200) level = 'Q';
            if (count > 300) level = 'H';
            recommendedSize.textContent = level;
        }
        
        // æ›´æ–°å°ºå¯¸æ˜¾ç¤º
        function updateSizeValue() {
            sizeValue.textContent = sizeSlider.value;
        }
        
        // ç”ŸæˆäºŒç»´ç 
        function generateQRCode() {
            const text = inputText.value.trim();
            if (!text) {
                qrcodeDiv.innerHTML = '<p style="color: #999;">è¯·è¾“å…¥å†…å®¹</p>';
                downloadBtn.disabled = true;
                generationTime.textContent = '-';
                return;
            }
            
            const startTime = performance.now();
            
            // æ¸…é™¤ä¹‹å‰çš„äºŒç»´ç 
            qrcodeDiv.innerHTML = '';
            
            const size = parseInt(sizeSlider.value);
            const fgColor = foregroundColor.value;
            const bgColor = backgroundColor.value;
            
            try {
                // ç”ŸæˆäºŒç»´ç 
                QRCode.toCanvas(text, {
                    width: size,
                    height: size,
                    colorDark: fgColor,
                    colorLight: bgColor,
                    correctLevel: QRCode.CorrectLevel.L
                }, function(err, canvas) {
                    if (err) {
                        console.error(err);
                        qrcodeDiv.innerHTML = '<p style="color: #ff6b6b;">ç”Ÿæˆå¤±è´¥ï¼š' + err.message + '</p>';
                        downloadBtn.disabled = true;
                        return;
                    }
                    
                    // ä¿å­˜ canvas å¼•ç”¨
                    qrCanvas = canvas;
                    currentQRCode = text;
                    
                    // æ·»åŠ åˆ°é¡µé¢
                    qrcodeDiv.appendChild(canvas);
                    
                    // å¯ç”¨ä¸‹è½½æŒ‰é’®
                    downloadBtn.disabled = false;
                    
                    // è®¡ç®—ç”Ÿæˆæ—¶é—´
                    const endTime = performance.now();
                    generationTime.textContent = Math.round(endTime - startTime);
                });
            } catch (error) {
                console.error(error);
                qrcodeDiv.innerHTML = '<p style="color: #ff6b6b;">ç”Ÿæˆå¤±è´¥ï¼š' + error.message + '</p>';
                downloadBtn.disabled = true;
            }
        }
        
        // ä¸‹è½½äºŒç»´ç 
        function downloadQRCode() {
            if (!qrCanvas) return;
            
            // åˆ›å»ºä¸‹è½½é“¾æ¥
            const link = document.createElement('a');
            link.download = 'qrcode.png';
            link.href = qrCanvas.toDataURL('image/png');
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>