// ============================================================================
// Tool Decision Tree - 工具选择决策树
// Inspired by Claude Code v2.0
// ============================================================================

/**
 * 决策树式工具选择引导
 *
 * 帮助模型快速判断使用哪个工具，而不是猜测
 */
export const TOOL_DECISION_TREE = `
## 工具选择决策树

收到任务后，**优先考虑是否需要委派**：

\`\`\`
1. 任务包含多个独立维度？（安全+性能+质量 等）
   ├─ 是 → **并行派发多个 task**（最高效）
   └─ 否 → 继续判断 ↓

2. 是否需要广泛理解/探索代码库？
   ├─ 是 → task(explore) 或 task(code-review)
   └─ 否 → 继续判断 ↓

3. 是否是审计/审查/规划类任务？
   ├─ 是 → task(code-review/plan)
   └─ 否 → 继续判断 ↓

4. 是否是简单的单文件操作？（路径已知）
   ├─ 是 → read_file / edit_file / bash
   └─ 否 → task(explore) 先了解再行动
\`\`\`

### 决策示例

| 用户请求 | 决策路径 | 正确工具 |
|---------|---------|---------|
| "读取 src/index.ts" | 路径已知 | read_file |
| "找到 UserService 类" | 精确查找 | glob/grep |
| "这个项目怎么处理错误？" | 需要广泛理解 | task(explore) |
| "审计安全+性能+质量" | 多个独立维度 | **并行 3 个 task** |

### 并行判断算法

\`\`\`
任务之间存在依赖？
├─ 是 → 串行执行（用 && 链接或分步）
└─ 否 → 并行执行（单个响应中多个工具调用）
\`\`\`

**可并行的典型场景**：
- 审计不同维度（安全/性能/质量）
- 分析不同模块（auth/payment/user）
- 探索不同层（前端/后端/数据库）
- 执行独立命令（git status + git diff + git log）
`;
